cms_visual_edit={default_string:"",init:function(){$(".cms_visual_editable").css({outline:"1px solid blue",cursor:"pointer"})},edit:function(b){$(".cms_visual_editable").css("outline","1px solid blue");b.contentEditable=true;b.style.outline="1px solid green";b.style.cursor="default";cms_visual_edit.load_btn(b);b.focus();this.default_string=$(b).html()},save:function(d){var c=$("#"+d);c.css({outline:"1px solid orange",cursor:""});$.ajax({type:"POST",url:"/-/api/visual_edit_save/",data:{content:c.html(),component:c.data("component"),page_id:c.data("page_id"),type:c.data("type")},dataType:"json",complete:function(a){if(a.status){c.css("outline","1px solid blue")}},error:function(){c.css("outline","1px solid red")}});cms_visual_edit.init();cms_visual_edit.hide_btn()},reset:function(d){var c=$("#"+d);c.html(cms_visual_edit.default_string);cms_visual_edit.init()},load_btn:function(b){this.hide_btn();$(b).after('<div id="visual_btn" style="position:absolute; z-index: 9999; background-color: #FFFFFF;";><button id="visual_save" style="padding: 3px; margin-top: 3px;" onclick="cms_visual_edit.save(\''+b.id+'\')">Update</button><button style="padding: 3px; margin-top: 3px;" onclick="cms_visual_edit.reset(\''+b.id+"')\">Reset</button></div>")},hide_btn:function(){$("#visual_btn").remove()}};$(function(){cms_visual_edit.init();var b=$(".cms_visual_editable");$(document).on("click",function(a){if(b.is(":visible")&&!b.is(a.target)&&!b.has(a.target).length){cms_visual_edit.init();cms_visual_edit.hide_btn()}})});